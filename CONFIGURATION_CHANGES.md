# Изменения конфигурации: Настраиваемая ширина канала боковика

## Описание изменений

Устранено захардкоженное значение **2%** для минимальной ширины канала боковика и вынесено в конфигурационный файл.

## Что было изменено

### 1. Файл: `src/modules/analysis/price-analysis.service.ts`

**Добавлено:**
- Новое поле `private readonly minChannelWidthPercent: number;`
- Инициализация значения из конфига в конструкторе
- Использование конфигурируемого значения вместо захардкоженного

**Замененные места:**
- В методе `shouldAddPoint()`: `if (rangePercentage < 2.0)` → `if (rangePercentage < this.minChannelWidthPercent)`
- В методе `checkForSidewaysCompletion()`: `if (rangePercentage < 2.0)` → `if (rangePercentage < this.minChannelWidthPercent)`

### 2. Файл: `src/config/app.config.ts`

**Уже содержал:**
- Параметр `minChannelWidthPercent: 2.0` в секции `analysis`

## Как использовать

### Изменение минимальной ширины канала

Отредактируйте файл `src/config/app.config.ts`:

```typescript
analysis: {
  lookbackPeriod: 3,
  minChannelWidthPercent: 3.5, // Измените это значение
  returnThreshold: 0.005,
  bufferSize: 300,
  analysisInterval: 60000,
}
```

### Примеры значений

- `1.0` - Очень чувствительное обнаружение боковиков (более частые сигналы)
- `2.0` - Стандартное значение (текущее по умолчанию)
- `3.0` - Более строгое обнаружение (только значительные боковики)
- `5.0` - Очень строгое обнаружение (только крупные боковики)

## Преимущества

✅ **Гибкость**: Легко настроить чувствительность алгоритма без изменения кода  
✅ **Экспериментирование**: Можно быстро тестировать разные значения  
✅ **Адаптация**: Легко подстроить под разные рыночные условия  
✅ **Централизация**: Все настройки в одном месте  

## Совместимость

- ✅ Обратная совместимость сохранена
- ✅ Значение по умолчанию 2.0% остается неизменным
- ✅ Никаких дополнительных зависимостей не требуется

## Результат

Теперь приложение полностью использует конфигурируемое значение вместо захардкоженного, что делает систему более гибкой и удобной для настройки.
